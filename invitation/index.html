<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="Content-Script-Type" content="text/javascript">
    <meta http-equiv="Content-Style-Type" content="text/css">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <meta id="viewportTag" name="viewport" content="width=device-width, initial-scale=1.0, maximun-scale=1.0, user-scalable=no">

    <meta name="author" content="박준영❤️최영은 결혼합니다">
    <meta name="keywords" content="박준영❤️최영은 결혼합니다">
    <meta name="description" content="2025년 8월 31일 일요일 웨딩그룹위더스 영등포">

    <meta property="og:type" content="website">
    <meta property="og:title" content="박준영❤️최영은 결혼합니다">
    <meta property="og:description" content="2025년 8월 31일 일요일 웨딩그룹위더스 영등포">
    <meta property="og:image" content="https://raw.githubusercontent.com/pjy0509/pjy0509.github.io/refs/heads/main/invitation/assets/images/i0.jpg">
    <meta property="og:url" content="https://pjy0509.github.io/invitation">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="박준영❤️최영은 결혼합니다">
    <meta name="twitter:description" content="2025년 8월 31일 일요일 웨딩그룹위더스 영등포">
    <meta name="twitter:image" content="https://raw.githubusercontent.com/pjy0509/pjy0509.github.io/refs/heads/main/invitation/assets/images/i0.jpg">

    <meta name="format-detection" content="telephone=no">

    <title>박준영❤️최영은 결혼합니다</title>

    <link rel="icon" href="FAVICON" type="image/x-icon">
    <link rel="shortcut icon" href="FAVICON" type="image/x-icon">

    <link href="https://fonts.cdnfonts.com/css/heuristica" rel="stylesheet">

    <!-- Kakao -->
    <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.5/kakao.min.js" integrity="sha384-dok87au0gKqJdxs7msEdBPNnKSRT+/mhTVzq+qOhcL464zXwvcrpjeWvyj1kCdq6" crossorigin="anonymous"></script>
    <script charset="UTF-8" class="daum_roughmap_loader_script" src="https://ssl.daumcdn.net/dmaps/map_js_init/roughmapLoader.js"></script>
    <!-- Native -->
    <script src="https://unpkg.com/native-fn@latest/dist/index.umd.js"></script>
    <!-- Eventlistener Manager -->
    <script src="https://unpkg.com/eventlistener-manager@latest/dist/index.umd.js"></script>
    <!-- Particles -->
    <script src="https://cdn.jsdelivr.net/npm/tsparticles@3.8.1/tsparticles.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tsparticles/shape-image@3.8.1/tsparticles.shape.image.min.js"></script>
    <!-- Carousel -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@glidejs/glide/dist/css/glide.core.min.css">
    <script src="https://unpkg.com/@glidejs/glide"></script>
    <!-- SimpleBar -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simplebar@latest/dist/simplebar.css"/>
    <script src="https://cdn.jsdelivr.net/npm/simplebar@latest/dist/simplebar.min.js"></script>
    <!-- AOS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <!-- Day -->
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/plugin/timezone.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/plugin/advancedFormat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/locale/ko.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/locale/en.js"></script>

    <link rel="stylesheet" type="text/css" href="style/style.css">

    <!--TODO: 스크롤바, 파티클, 아코디언, iOS 스토어 이동, 전화, 메세지, 웨딩홀 전화, 웨딩홀 주소 복사, 계좌 복사, 카카오 즉시 송금, 토스 즉시 송금, 공유하기, Alert, Panel -->
</head>
<body>

<div class="container">
    <div>
        <div class="item-container item-intro" id="particle">
            <div class="background">
                <img src="assets/images/i0.jpg" alt=""/>
            </div>
        </div>

        <div
                class="item-container"
                data-aos="fade-up"
                data-aos-duration="1000"
                data-aos-easing="ease-out"
        >

            <div class="padding rem2"></div>

            <div class="item-content">
                서로의 마음에 피어난 작은 설렘이 어느새<br/>
                <div class="padding rem-half"></div>
                큰 사랑이 되어 평생을 함께할 약속으로 이어졌습니다.<br/>
                <div class="padding rem-half"></div>
                모든 날, 모든 순간을 아름답게 만들어가고<br/>
                <div class="padding rem-half"></div>
                이끌어주고, 응원해주는 서로가 되겠습니다.<br/>
                <div class="padding rem-half"></div>
                새로 시작하는 이 자리에 오셔서<br/>
                <div class="padding rem-half"></div>
                축복이 가득하길 함께 기원해 주시기 바랍니다.<br/>
            </div>

            <div class="padding rem3"></div>

            <div class="item-description2">
                신랑 <span data-groom></span> · 신부 <span data-bride></span>
            </div>
        </div>

        <div class="padding rem3"></div>

        <div
                class="item-container item-bg-dark"
                data-aos="fade-up"
                data-aos-duration="1000"
                data-aos-easing="ease-out"
        >
            <div class="item-title">
                WEDDING DAY
            </div>

            <div class="item-subtitle">
		<span data-wedding-date-time="YYYY년 M월 D일 dddd | A h시" data-wedding-date-time-locale="ko"></span>
            </div>

            <div class="item-description">
		<span data-wedding-date-time="dddd, MMMM D, YYYY | A hh:mm" data-wedding-date-time-locale="en"></span>
            </div>

            <div class="item-weather" id="weather">
                <div class="padding rem1"></div>

                <div class="weather-container">
                    <div class="weather-icon">
                        <div id="icon"></div>
                        <div id="detail"></div>
                    </div>
                    <div class="weather-primary">
                        <div id="temperature"></div>
                        <div id="apparent-temperature"></div>
                        <div id="precipitation-probability"></div>
                    </div>
                </div>
            </div>

            <div class="driver"></div>

            <div class="item-calendar" id="calendar">
            </div>

            <div class="driver"></div>

            <div class="item-countdown">
                <div id="days">0</div>
                <div id="hours">0</div>
                <div id="minutes">0</div>
                <div id="seconds">0</div>
            </div>

            <div class="padding rem3"></div>

            <div class="item-description2">
                D-<span id="remain-date">0일</span>
            </div>
        </div>

        <div
                class="item-container"
                data-aos="fade-up"
                data-aos-duration="1000"
                data-aos-easing="ease-out"
        >
            <div class="item-title">
                GALLERY
            </div>

            <div class="item-description">
                사진을 클릭하시면 전체 화면 보기가 가능합니다.
            </div>

            <div class="padding rem2"></div>

            <div class="glide item-carousel" data-glide>
                <div class="glide__track" data-glide-el="track" onclick="setFullscreenCarousel()">
                    <ul class="glide__slides">
                        <li class="glide__slide"><img src="assets/images/i1.jpeg" alt="" data-image-index="0"></li>
                        <li class="glide__slide"><img src="assets/images/i2.jpeg" alt="" data-image-index="1"></li>
                        <li class="glide__slide"><img src="assets/images/i3.jpeg" alt="" data-image-index="2"></li>
                        <li class="glide__slide"><img src="assets/images/i4.jpeg" alt="" data-image-index="3"></li>
                        <li class="glide__slide"><img src="assets/images/i5.jpg" alt="" data-image-index="4"></li>
                    </ul>
                </div>

                <div class="glide__arrows item-carousel-arrows" data-glide-el="controls">
                    <button class="glide__arrow glide__arrow--left" data-glide-dir="<">
                        <svg width="32px" height="32px" viewBox="0 0 24.00 24.00" fill="none" xmlns="http://www.w3.org/2000/svg" transform="matrix(-1, 0, 0, 1, 0, 0)">
                            <path id="Vector" d="M11 9L14 12L11 15" stroke="rgb(85, 85, 85)" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                    </button>
                    <div>
                        <span id="carousel-current">0</span> / <span id="carousel-total">0</span>
                    </div>
                    <button class="glide__arrow glide__arrow--right" data-glide-dir=">">
                        <svg width="32px" height="32px" viewBox="0 0 24.00 24.00" fill="none" xmlns="http://www.w3.org/2000/svg" transform="matrix(1, 0, 0, 1, 0, 0)">
                            <path id="Vector" d="M11 9L14 12L11 15" stroke="rgb(85, 85, 85)" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <div
                class="driver shiny"
                data-aos="fade-up"
                data-aos-duration="1000"
                data-aos-easing="ease-out"
        >
        </div>

        <div
                class="item-container"
                data-aos="fade-up"
                data-aos-duration="1000"
                data-aos-easing="ease-out"
        >
            <div class="item-title">
                LOCATION
            </div>

            <div class="item-subtitle">
                <span data-place-name></span>
            </div>

            <div class="item-description">
                <span data-place-address></span>
            </div>

            <div class="padding rem1"></div>

            <div class="item-description">
                지도를 클릭하시면 상세 화면 보기가 가능합니다.
            </div>

            <div class="padding rem2"></div>

            <div class="item-location" onclick="setFullscreenRoute()">
                <div id="daumRoughmapContainer1750215057190" class="root_daum_roughmap root_daum_roughmap_landing map"></div>
            </div>

            <div class="padding rem1"></div>

            <div class="item-routes">
                <div class="button-grid">
                    <button class="button" data-map-type="naver-map" onclick="openMap(this.dataset.mapType)">
                        <img src="assets/images/icon_navermap.png" alt=""/>
                        네이버 지도
                    </button>
                    <button class="button" data-map-type="kakao-map" onclick="openMap(this.dataset.mapType)">
                        <img src="assets/images/icon_kakaomap.png" alt=""/>
                        카카오 맵
                    </button>
                    <button class="button" data-map-type="kakao-navi" onclick="openMap(this.dataset.mapType)">
                        <img src="assets/images/icon_kakaonavi.png" alt=""/>
                        카카오 내비
                    </button>
                    <button class="button" data-map-type="t-map" onclick="openMap(this.dataset.mapType)">
                        <img src="assets/images/icon_tmap.png" alt=""/>
                        티 맵
                    </button>
                    <button class="button" data-map-type="google-map" onclick="openMap(this.dataset.mapType)">
                        <img src="assets/images/icon_googlemap.png" alt=""/>
                        구글 맵
                    </button>
                    <button class="button" data-map-type="apple-map" onclick="openMap(this.dataset.mapType)">
                        <img src="assets/images/icon_applemap.png" alt=""/>
                        지도
                    </button>
                </div>
            </div>
        </div>

        <div
                class="driver shiny"
                data-aos="fade-up"
                data-aos-duration="1000"
                data-aos-easing="ease-out"
        >
        </div>

        <div
                class="item-container"
                data-aos="fade-up"
                data-aos-duration="1000"
                data-aos-easing="ease-out"
        >
            <div class="item-title">
                CONTACT
            </div>

            <div class="item-subtitle">
                연락처
            </div>

            <div class="padding rem1"></div>

            <div class="item-description">
                축하의 뜻을 따로 전하시고자 하시는 분들을 위해 연락처를 기재하였습니다.<br/>
                <div class="padding rem-half"></div>
                진심 어린 축하에 깊이 감사드립니다.
            </div>

            <div class="padding rem2"></div>

            <div data-accordion>
                <div class="accordion-header">
                    신랑측
                </div>
                <div class="accordion-content">
                    010-7195-6148
                </div>
            </div>
        </div>

        <div
                class="driver shiny"
                data-aos="fade-up"
                data-aos-duration="1000"
                data-aos-easing="ease-out"
        >
        </div>

        <div
                class="item-container"
                data-aos="fade-up"
                data-aos-duration="1000"
                data-aos-easing="ease-out"
        >
            <div class="item-title">
                SEND GIFT
            </div>

            <div class="item-subtitle">
                마음 전하실 곳
            </div>

            <div class="padding rem1"></div>

            <div class="item-description">
                직접 축하 자리에 함께하시기 어려운 분들을 위해 준비했습니다.<br/>
                <div class="padding rem-half"></div>
                넓은 아량으로 이해해 주시고 따뜻한 마음으로 축복해 주세요.
            </div>

            <div class="padding rem2"></div>

            <div data-accordion>
                <div class="accordion-header">
                    신랑측
                </div>
                <div class="accordion-content">
                    010-7195-6148
                </div>
            </div>
        </div>

        <div class="button-list">
            <button class="button" data-map-type="kakao-talkcalendar" onclick="doShareKakaoTalk()">
                공유하기
            </button>
        </div>
    </div>
</div>

<div data-modal-id="schedule" onclick="closeModal(this)">
    <div onclick="event.stopPropagation()">
        <div class="modal-header">
            <button class="modal-close" onclick="closeModal(this)"></button>

            <div class="title">
                일정 등록
            </div>
        </div>

        <div class="modal-content">
            <div class="driver shiny"></div>

            <div class="description">
                일정 등록이 완료되었습니다.
            </div>

            <div>
            </div>
        </div>
    </div>
</div>

<div class="item-container" data-fullscreen="route">
    <div class="padding rem2"></div>

    <div class="item-title">
        LOCATION
    </div>

    <div class="item-subtitle">
	<span data-place-name></span>
    </div>

    <div class="item-description">
	<span data-place-address></span>
    </div>

    <div class="padding rem2"></div>

    <div class="item-location">
        <div id="daumRoughmapContainer1750165976255" class="root_daum_roughmap root_daum_roughmap_landing map"></div>
    </div>

    <div class="item-park">
        <strong>주차장</strong>

        <div>
            <strong>건물 주차장</strong>
            주차 수용 대수: 600<br/>
            무료: 2시간<br/>
            유료: 500원 / 10분<br/>
        </div>

        <div>
            <strong>영남 주차장</strong>
            주차 수용 대수: 570<br/>
            무료: 0시간<br/>
            유료: 160원 / 5분<br/>
        </div>
    </div>

    <div class="driver shiny"></div>

    <ul data-selector>
        <li data-value="car">
            차
            <svg width="64px" height="64px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#444444">
                <g>
                    <path d="M3 8L5.72187 10.2682C5.90158 10.418 6.12811 10.5 6.36205 10.5H17.6379C17.8719 10.5 18.0984 10.418 18.2781 10.2682L21 8M6.5 14H6.51M17.5 14H17.51M8.16065 4.5H15.8394C16.5571 4.5 17.2198 4.88457 17.5758 5.50772L20.473 10.5777C20.8183 11.1821 21 11.8661 21 12.5623V18.5C21 19.0523 20.5523 19.5 20 19.5H19C18.4477 19.5 18 19.0523 18 18.5V17.5H6V18.5C6 19.0523 5.55228 19.5 5 19.5H4C3.44772 19.5 3 19.0523 3 18.5V12.5623C3 11.8661 3.18166 11.1821 3.52703 10.5777L6.42416 5.50772C6.78024 4.88457 7.44293 4.5 8.16065 4.5ZM7 14C7 14.2761 6.77614 14.5 6.5 14.5C6.22386 14.5 6 14.2761 6 14C6 13.7239 6.22386 13.5 6.5 13.5C6.77614 13.5 7 13.7239 7 14ZM18 14C18 14.2761 17.7761 14.5 17.5 14.5C17.2239 14.5 17 14.2761 17 14C17 13.7239 17.2239 13.5 17.5 13.5C17.7761 13.5 18 13.7239 18 14Z"
                          stroke="#444444" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                </g>
            </svg>
        </li>
        <li data-value="transit">
            대중교통
            <svg width="64px" height="64px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g>
                    <path d="M5 6V15.8C5 16.9201 5 17.4802 5.21799 17.908C5.40973 18.2843 5.71569 18.5903 6.09202 18.782C6.51984 19 7.07989 19 8.2 19H15.8C16.9201 19 17.4802 19 17.908 18.782C18.2843 18.5903 18.5903 18.2843 18.782 17.908C19 17.4802 19 16.9201 19 15.8V6M5 6C5 6 5 3 12 3C19 3 19 6 19 6M5 6H19M5 13H19M17 21V19M7 21V19M8 16H8.01M16 16H16.01"
                          stroke="#444444" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                </g>
            </svg>
        </li>
        <li data-value="walk">
            도보
            <svg width="64px" height="64px" viewBox="-97 0 512 512" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="#444444">
                <g>
                    <path fill="#444444"
                          d="M68.822,394.263l21.259,-49.604l51.65,51.65l-16.93,34.695c-1.613,3.306 -3.784,6.309 -6.418,8.877l-63.912,62.324c-12.504,12.193 -32.56,12.023 -44.961,-0.275c-12.627,-12.523 -12.708,-33.027 -0.073,-45.543l52.492,-51.994c2.929,-2.901 5.269,-6.341 6.893,-10.13Zm25.076,-180.83l26.489,-10.52l-18.105,82.627c-1.075,4.907 0.217,10.035 3.489,13.846l0.28,0.326l53.312,60.288l-0.167,0.517l0.224,-0.46l32.816,44.244c2.456,3.31 4.249,7.065 5.28,11.056l18.488,71.534c4.45,17.218 22.205,27.473 39.384,22.87c16.869,-4.52 27.116,-21.762 22.878,-38.705l-21.323,-85.252c-1.111,-4.444 -3.163,-8.597 -6.018,-12.179l-54.38,-68.24l16.859,-65.748l9.711,25.748c2.123,5.629 5.789,10.546 10.579,14.186l33.912,25.773c14.026,10.66 34.04,7.965 44.762,-6.013c10.783,-14.057 8.104,-34.213 -5.99,-44.947l-25.107,-19.123c-4.523,-3.445 -8.047,-8.033 -10.208,-13.292l-21.681,-52.748c-2.806,-6.826 -7.906,-12.036 -14.053,-15.086l0.034,-0.135c0,0 -25.696,-17.436 -44.5,-22.5c-19.553,-5.265 -50.639,-1.941 -54.17,-1.538c-3.94,-0.014 -7.947,0.704 -11.834,2.238l-72.866,28.762c-1.72,0.679 -3.217,1.821 -4.327,3.299l-33.134,44.146c-10.593,14.114 -7.735,34.159 6.357,44.782c14.112,10.639 34.204,7.844 44.842,-6.268l21.296,-28.249c1.767,-2.343 4.144,-4.155 6.871,-5.239Zm105.465,-101.433c30.928,0 56,-25.072 56,-56c0,-30.928 -25.072,-56 -56,-56c-30.928,0 -56,25.072 -56,56c0,30.928 25.072,56 56,56Z"></path>
                </g>
            </svg>
        </li>
    </ul>

    <div class="padding rem1"></div>

    <div class="item-routes" data-method="car">
        <div class="button-grid">
            <button class="button" data-map-type="naver-map" onclick="openMap(this.dataset.mapType)">
                <img src="assets/images/icon_naver_map.png" alt=""/>
                네이버 지도
            </button>
            <button class="button" data-map-type="kakao-map" onclick="openMap(this.dataset.mapType)">
                <img src="assets/images/icon_kakao_map.png" alt=""/>
                카카오 맵
            </button>
            <button class="button" data-map-type="kakao-navi" onclick="openMap(this.dataset.mapType)">
                <img src="assets/images/icon_kakao_navi.png" alt=""/>
                카카오 내비
            </button>
            <button class="button" data-map-type="t-map" onclick="openMap(this.dataset.mapType)">
                <img src="assets/images/icon_t_map.png" alt=""/>
                티 맵
            </button>
            <button class="button" data-map-type="google-map" onclick="openMap(this.dataset.mapType)">
                <img src="assets/images/icon_google_map.png" alt=""/>
                구글 맵
            </button>
            <button class="button" data-map-type="apple-map" onclick="openMap(this.dataset.mapType)">
                <img src="assets/images/icon_apple_map.png" alt=""/>
                지도
            </button>
            <button class="button" data-map-type="uber-taxi" onclick="openMap(this.dataset.mapType)">
                <img src="assets/images/icon_uber_taxi.png" alt=""/>
                우버 택시
            </button>
        </div>
    </div>

    <div class="padding rem2"></div>
</div>

<div class="item-container" data-fullscreen="schedule"></div>

<div class="item-container" data-fullscreen="carousel"></div>
	
<div data-loader></div>

<script>Kakao.init("81d57ff9f2d2a5524e506d8a1d386fd5");</script>
<script>AOS.init();</script>

<script type="text/javascript">
	// CONSTANT BEGIN
	const LATITUDE = "37.52137722994085";
	const LONGITUDE = "126.90459301926333";
	const PLACE_NAME = "웨딩그룹위더스 영등포";
	const PLACE_ADDRESS = "서울 영등포구 영중로 55";
	const TIMEZONE = "Asia/Seoul";
	const WEDDING_DATE_TIME_START_ISO_STRING = "2025-08-31T03:20:00Z";
	const WEDDING_DATE_TIME_END_ISO_STRING = "2025-08-31T04:30:00Z";
	const WEDDING_DATE_ISO_STRING = "2025-08-31";
	const WEDDING_DATE_TIME_START = new Date(WEDDING_DATE_TIME_START_ISO_STRING);
	const WEDDING_DATE_TIME_END = new Date(WEDDING_DATE_TIME_END_ISO_STRING);
	const WEDDING_DATE = new Date(WEDDING_DATE_ISO_STRING);
	const GROOM = "박준영";
	const BRIDE = "최영은";
	const META_TITLE = document.querySelector("meta[property=\"og:title\"]").content;
	const META_DESCRIPTION = document.querySelector("meta[property=\"og:description\"]").content;
	const KAKAO_REST_API_KEY = "7c29ec39d56410088e1ba66176d61b4b";
	// CONSTANT END

	initUserAgent();
	initConstant();

	const search = new URLSearchParams(location.search);

	if (search.has("mode")) {
		const mode = search.get("mode");
		const element = document.querySelector("[data-fullscreen=\"" + mode + "\"]");

		if (element !== null) {
			element.classList.add("show");
		}

		switch (mode) {
			case "schedule":
				createSchedule();
				break;
			case "route":
				initMap(true);
				break;
			case "carousel":
				initCarousel(true);
				break;
		}
	} else {
		document.querySelector(".item-intro").style.height = window.outerHeight + "px";

		syncScrollY();
		document.onreadystatechange = function () {
			syncScrollY();
		}

		window.onload = function () {
			syncScrollY(true);

			initModal();
			initTsparticle();
			initCalendar();
			initWeather();
			initCarousel();
			initMap();
		};
	}

	function initUserAgent() {
		const userAgent = navigator.userAgent;

		// OS
		document.body.dataset.osName = Native.OS.name;

		// WebView
		if (/KAKAOTALK\/(\d*\.)*\d* \(INAPP\)/.test(userAgent)) document.body.dataset.wv = "kakao";

		// Color Scheme
		function detectColorScheme() {
			new Promise(resolve => {
				if (navigator.userAgent.match(/Samsung/i) || window.matchMedia === undefined) {
					const img = new Image();

					img.onload = function () {
						const ctx = document.createElement("canvas").getContext("2d");
						ctx.drawImage(img, 0, 0);
						const [r, g, b] = ctx.getImageData(0, 0, 1, 1).data;
						resolve((r & b & g) < 255 ? "dark" : "light");
					}

					img.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMSIgaGVpZ2h0PSIxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9IndoaXRlIi8+PC9zdmc+';
				} else {
					resolve(window.matchMedia('(prefers-color-scheme:dark)').matches ? "dark" : "light");
				}
			})
				.then(scheme => document.documentElement.dataset.colorScheme = scheme);
		}

		detectColorScheme();
		window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", detectColorScheme);
	}

	function initConstant() {
		dayjs.extend(dayjs_plugin_advancedFormat);
		
		const date = dayjs(WEDDING_DATE_TIME_START);
		
		document.querySelectorAll("[data-wedding-date-time]").forEach(el => el.textContent = date.locale(el.dataset.weddingDateTimeLocale).format(el.dataset.weddingDateTime));
		document.querySelectorAll("[data-groom]").forEach(el => el.textContent = GROOM);
		document.querySelectorAll("[data-bride]").forEach(el => el.textContent = BRIDE);
		document.querySelectorAll("[data-place-name]").forEach(el => el.textContent = PLACE_NAME);
		document.querySelectorAll("[data-place-address]").forEach(el => el.textContent = PLACE_ADDRESS);
	}

	function initModal() {
		history.pushState(null, null, document.URL);

		window.addEventListener("popstate", function () {
			const shownModal = document.querySelector("[data-modal-id].show");

			if (shownModal) {
				history.pushState(null, null, document.URL);
				shownModal.classList.remove("show");
			}
		});

		function showModal(id) {
			const modal = id instanceof HTMLElement
				? id.closest("[data-modal-id]")
				: document.querySelector("[data-modal-id=" + id + "]");

			modal.classList.add("show");
			modal.firstElementChild.onscroll = () => modal.dataset.scroll = modal.firstElementChild.scrollTop.toString();
			history.pushState({}, "", "#" + window.scrollY.toString());
		}

		function closeModal(id) {
			const modal = id instanceof HTMLElement
				? id.closest("[data-modal-id]")
				: document.querySelector("[data-modal-id=" + id + "]");

			modal.classList.remove("show");
			history.pushState({}, "", "#");
		}

		window.showModal = showModal.bind(window);
		window.closeModal = closeModal.bind(window);
	}

	function initTsparticle() {
		loadImageShape(tsParticles)
			.then(function () {
				tsParticles.load({
					id: "particle",
					options: {
						fullScreen: {
							enable: false
						},
						detectRetina: true,
						fpsLimit: 60,
						particles: {
							number: {
								value: 130,
								limit: {
									mode: "delete",
									value: 0
								},
								density: {
									enable: true,
									width: 1920,
									height: 1080
								}
							},
							shape: {
								type: ["image", "image", "image", "image"],
								options: {
									image: [
										{src: "./assets/images/p1.png"},
										{src: "./assets/images/p2.png"},
										{src: "./assets/images/p3.png"},
										{src: "./assets/images/p4.png"},
									]
								},
							},
							size: {
								"value": {
									"min": 5,
									"max": 6
								},
								"animation": {
									"enable": false,
									"speed": 5,
									"sync": false,
									"mode": "auto",
									"startValue": "random",
									"destroy": "none"
								}
							},
							shadow: {
								"blur": 0,
								"color": {
									"value": "#000"
								},
								"enable": false,
							},
							rotate: {
								"value": {
									"min": 180,
									"max": 360
								},
								"animation": {
									"enable": true,
									"speed": 60,
									"sync": false
								},
								"direction": "random",
								"path": false
							},
							reduceDuplicates: false,
							opacity: {
								"value": 1,
								"animation": {
									"enable": false,
									"speed": 0.3,
									"sync": true,
									"mode": "auto",
									"startValue": "max",
									"destroy": "min"
								}
							},
							move: {
								"angle": {
									"offset": 0,
									"value": 90
								},
								"attract": {
									"distance": 200,
									"enable": false,
									"rotate": {
										"x": 3000,
										"y": 3000
									}
								},
								"center": {
									"x": 50,
									"y": 50,
									"mode": "percent",
									"radius": 0
								},
								"decay": 0,
								"distance": {},
								"direction": "bottom-left",
								"drift": 0,
								"enable": true,
								"gravity": {
									"acceleration": 9.81,
									"enable": false,
									"inverse": false,
									"maxSpeed": 50
								},
								"path": {
									"clamp": true,
									"delay": {
										"value": 0
									},
									"enable": false,
									"options": {}
								},
								"outModes": {
									"default": "out",
									"bottom": "out",
									"left": "out",
									"right": "out",
									"top": "out"
								},
								"random": false,
								"size": true,
								"speed": {
									"min": 1,
									"max": 4
								},
								"spin": {
									"acceleration": 0,
									"enable": false
								},
								"straight": false,
								"trail": {
									"enable": false,
									"length": 10,
									"fill": {}
								},
								"vibrate": false,
								"warp": false
							},
							life: {
								"count": 0,
								"delay": {
									"value": 0,
									"sync": false
								},
								"duration": {
									"value": 0,
									"sync": false
								}
							},
							effect: {
								"close": true,
								"fill": true,
								"options": {},
								"type": []
							},
							color: {
								"value": "#fff",
							},
							collisions: {
								"absorb": {
									"speed": 2
								},
								"bounce": {
									"horizontal": {
										"value": 1
									},
									"vertical": {
										"value": 1
									}
								},
								"enable": false,
								"maxSpeed": 50,
								"mode": "bounce",
								"overlap": {
									"enable": true,
									"retries": 0
								}
							},
						},
					}
				});
			});
	}

	function initCalendar() {
		// TIMER BEGIN
		const components = [document.getElementById("remain-date"), document.getElementById("days"), document.getElementById("hours"), document.getElementById("minutes"), document.getElementById("seconds")];
		const calendar = document.getElementById("calendar");

		calendar.innerHTML = "";

		const startDay = new Date(WEDDING_DATE_TIME_START.getFullYear(), WEDDING_DATE_TIME_START.getMonth()).getDay();
		const lastDate = new Date(WEDDING_DATE_TIME_START.getFullYear(), WEDDING_DATE_TIME_START.getMonth() + 1, 0).getDate();
		const targetDate = WEDDING_DATE_TIME_START.getDate();
		const grid = document.createElement("div");

		['일', '월', '화', '수', '목', '금', '토'].forEach(d => {
			const weekday = document.createElement("div");
			const el = document.createElement("p");

			el.innerText = d;
			weekday.appendChild(el);
			grid.appendChild(weekday);
		});

		for (let i = 0; i < startDay; i++) grid.appendChild(document.createElement("div"));

		for (let d = 1; d <= lastDate; d++) {
			const day = document.createElement("div");
			const el = document.createElement("p");

			if (d === targetDate) day.id = "target";

			el.innerText = d.toString();
			day.appendChild(el);
			grid.appendChild(day);
		}

		calendar.appendChild(grid);

		const targetTimestamp = +WEDDING_DATE_TIME_START;

		setInterval(function () {
			let subtract = Math.floor((targetTimestamp - Date.now()) / 1000);

			const days = Math.floor(subtract / 86400);
			const hours = Math.floor((subtract %= 86400) / 3600);
			const minutes = Math.floor((subtract %= 3600) / 60);
			const seconds = subtract % 60;

			components[0].textContent = (days + 1).toString() + "일";
			components[1].textContent = days.toString();
			components[2].textContent = hours.toString();
			components[3].textContent = minutes.toString();
			components[4].textContent = seconds.toString();
		}, 1000);
		// TIMER END
	}

	function initWeather() {
		const components = [document.getElementById("icon"), document.getElementById("detail"), document.getElementById("temperature"), document.getElementById("apparent-temperature"), document.getElementById("precipitation-probability")];
		const weather = document.getElementById("weather");

		fetch(
			"https://api.open-meteo.com/v1/forecast?"
			+ new URLSearchParams({
				latitude: LATITUDE,
				longitude: LONGITUDE,
				hourly: "temperature_2m,relative_humidity_2m,wind_speed_10m,precipitation,precipitation_probability,apparent_temperature,weathercode",
				start_date: WEDDING_DATE_ISO_STRING,
				end_date: WEDDING_DATE_ISO_STRING,
				timezone: TIMEZONE
			})
		)
			.then(response => response.json())
			.then(data => {
				let i = data.hourly.time.indexOf(WEDDING_DATE_ISO_STRING + "T12:00");

				if (i === -1) return;

				const weatherCodeMap = {
					0: {emoji: "☀️", detail: "맑음"},
					1: {emoji: "🌤", detail: "조금 흐림"},
					2: {emoji: "⛅️", detail: "흐림"},
					3: {emoji: "🌥", detail: "흐림"},
					45: {emoji: "🌫", detail: "안개"},
					48: {emoji: "🌫", detail: "서리 안개"},
					51: {emoji: "🌦", detail: "이슬비"},
					53: {emoji: "🌦", detail: "이슬비"},
					55: {emoji: "🌦", detail: "이슬비"},
					56: {emoji: "🌧", detail: "어는 이슬비"},
					57: {emoji: "🌧", detail: "어는 이슬비"},
					61: {emoji: "🌧", detail: "비"},
					63: {emoji: "🌧", detail: "비"},
					65: {emoji: "🌧", detail: "비"},
					66: {emoji: "🌧", detail: "어는 비"},
					67: {emoji: "🌧", detail: "어는 비"},
					71: {emoji: "🌨", detail: "눈"},
					73: {emoji: "🌨", detail: "눈"},
					75: {emoji: "🌨", detail: "눈"},
					77: {emoji: "🌨", detail: "진눈깨비"},
					80: {emoji: "🌧", detail: "소나기"},
					81: {emoji: "🌧", detail: "소나기"},
					82: {emoji: "🌧", detail: "소나기"},
					85: {emoji: "🌨", detail: "눈 소나기"},
					86: {emoji: "🌨", detail: "눈 소나기"},
					95: {emoji: "⚡️", detail: "천둥"},
					96: {emoji: "🌩", detail: "우박, 천둥"},
					99: {emoji: "🌩", detail: "우박, 천둥"}
				};

				const weatherCode = weatherCodeMap[data.hourly.weathercode[i]];

				components[0].innerText = weatherCode.emoji;
				components[1].innerText = weatherCode.detail;
				components[2].innerText = data.hourly.temperature_2m[i] + " °C";
				components[3].innerText = data.hourly.apparent_temperature[i] + " °C";
				components[4].innerText = data.hourly.relative_humidity_2m[i] + " %";

				weather.classList.add("show");

				console.log(`기온: ${data.hourly.temperature_2m[i]} °C`);
				console.log(`체감온도: ${data.hourly.apparent_temperature[i]} °C`);
				console.log(`습도: ${data.hourly.relative_humidity_2m[i]} %`);
				console.log(`풍속: ${data.hourly.wind_speed_10m[i]} m/s`);
				console.log(`강수량: ${data.hourly.precipitation[i]} mm`);
				console.log(`강수 확률: ${data.hourly.precipitation_probability[i]} %`);
				console.log(`기상 코드: ${data.hourly.weathercode[i]}`);
			});
	}

	function initCarousel(fullscreen = false) {
		// CAROUSEL BEGIN
		const glide = document.querySelector("[data-glide]");
		let track = glide.querySelector("[data-glide-el=\"track\"]");

		if (fullscreen) {
			track.onclick = undefined;
			document.querySelector("[data-fullscreen=\"carousel\"]").append(glide);
		}

		const carousel = new Glide(".item-carousel", {
			type: "carousel",
			perView: 1,
			gap: 16,
			autoplay: 0,
			hoverpause: true,
			animationDuration: 200,
		})
			.mount();

		const current = document.getElementById("carousel-current");
		const total = document.getElementById("carousel-total");

		total.textContent = carousel._c.Html.slides.length.toString();
		current.textContent = (carousel.index + 1).toString();

		carousel.on("move", function () {
			current.textContent = (carousel.index + 1).toString();
		});

		if (fullscreen) {
			let images;

			track = document.querySelector("[data-glide] [data-glide-el=\"track\"]");

			carousel.on("move.after", function () {
				images = track.querySelectorAll("[data-image-index=\"" + carousel.index + "\"]");
			});

			EventManager.on(glide, ['touchpinchmove'], e => {
				const dp = e.paths.slice(-2);

				if (dp.length < 2) return;

				const dd = dp.reduce((curr, prev) => curr.distance - prev.distance);
				const dx = dp.reduce((curr, prev) => curr.center.x - prev.center.x);
				const dy = dp.reduce((curr, prev) => curr.center.y - prev.center.y);

				images.forEach(image => {
					const scale = image.style.scale;
					const transform = image.style.transform;
					const px = transform.indexOf("px");
					const py = transform.lastIndexOf("px");

					image.style.scale = Math.max(0.33, Math.min(3, scale - dd / 125)).toString();
					image.style.transform = "translate(" + (Number(transform.substring(10, px)) - dx * 1.25) + "px, " + (Number(transform.substring(px + 3, py)) - dy * 1.25) + "px)"
				});
			});

			EventManager.on(glide, ['touchpinchstart'], () => {
				carousel.disable();
			});

			EventManager.on(glide, ['touchpinchend'], () => {
				images.forEach(image => {
					image.style.scale = "1";
					image.style.transform = "translate(0px, 0px)";
				});

				carousel.enable();
				carousel.update({animationDuration: 0});
				carousel.go("=" + carousel.index);
				carousel.update({animationDuration: 200});
				setTimeout(() => {
					carousel.enable();
					carousel.update({animationDuration: 0});
					carousel.go("=" + carousel.index);
					carousel.update({animationDuration: 200});
				});
			});

		}

		return carousel;
		// CAROUSEL END
	}

	function syncScrollY(removeHash = false) {
		const y = +location.hash.split("#")[1];

		if (!isNaN(y)) window.scrollY = y;
		if (removeHash) history.pushState({}, "", "#");
	}

	function setFullscreenCarousel() {
		location.href = location.origin + location.pathname + "?mode=carousel";
	}

	function setFullscreenRoute() {
		location.href = location.origin + location.pathname + "?mode=route";
	}

	function initMap(fullscreen = false) {
		// KAKAO MAP BEGIN
		if (fullscreen) {
			new daum.roughmap.Lander({
				timestamp: "1750165976255",
				key: "3pycungqfsg",
				mapWidth: "360",
				mapHeight: "240"
			})
				.render();

			const routes = document.querySelector("[data-fullscreen=\"route\"] .item-routes");
			const ul = document.querySelector("[data-selector]");
			let method = localStorage.getItem("method");

			if (method === null) method = "car";

			function onclick() {
				ul.childNodes.forEach(node => {
					if (node instanceof HTMLElement) {
						if (node === this) node.classList.add("selected");
						else node.classList.remove("selected");
					}
				});

				const newMethod = this.dataset.value;

				routes.dataset.method = newMethod;
				localStorage.setItem("method", newMethod);
			}

			ul.childNodes.forEach(node => {
				if (node instanceof HTMLElement) {
					node.onclick = onclick.bind(node);

					if (node.dataset.value === method) {
						node.classList.add("selected");
						routes.dataset.method = method;
					}
				}
			});

		} else {
			new daum.roughmap.Lander({
				timestamp: "1750215057190",
				key: "3r29hec3887",
				mapWidth: "360",
				mapHeight: "240"
			})
				.render();
		}
		// KAKAO MAP END
	}

	function openMap(type) {
		const routes = document.querySelector("[data-fullscreen=\"route\"] .item-routes");

		let method = routes.dataset.method,
			scheme,
			packageName,
			intent,
			fallback;

		function createIntent(scheme, packageName, fallback = "market://details?id=" + packageName) {
			const [pre, suf] = scheme.split("://");

			return "intent://" + suf
				+ "#Intent;"
				+ "scheme=" + pre + ";"
				+ "action=android.intent.action.VIEW;"
				+ "category=android.intent.category.BROWSABLE;"
				+ "package=" + packageName + ";"
				+ "S.browser_fallback_url=" + fallback + ";"
				+ "end";
		}

		switch (type) {
			case "t-map":
				intent = createIntent(
					scheme = "tmap://route"
						+ "?goaly=" + encodeURIComponent(LATITUDE)
						+ "&goalx=" + encodeURIComponent(LONGITUDE)
						+ "&goalname=" + encodeURIComponent(PLACE_NAME),
					packageName = "com.skt.tmap.ku"
				);

				if (Native.OS.name === "Android") {
					location.href = intent;
					return;
				}

				new Native.App({
					ios: {
						scheme: scheme,
						trackId: "431589174",
					}
				})
					.run();
				return;
			case "naver-map":
				intent = createIntent(
					scheme = "nmap://"
						+ (method === "car" ? "navigation" : method === "transit" ? "route/public" : method === "walk" ? "route/walk" : "")
						+ "?dlat=" + encodeURIComponent(LATITUDE)
						+ "&dlng=" + encodeURIComponent(LONGITUDE)
						+ "&dname=" + encodeURIComponent(PLACE_NAME)
						+ "&appname=" + encodeURIComponent(location.origin),
					packageName = "com.nhn.android.nmap",
					fallback = "http://map.naver.com/index.nhn"
						+ "?elat=" + encodeURIComponent(LATITUDE)
						+ "&elng=" + encodeURIComponent(LONGITUDE)
						+ "&etext=" + encodeURIComponent(PLACE_NAME)
						+ "&menu=" + encodeURIComponent("route")
						+ "&pathType=" + encodeURIComponent(method === "car" ? "0" : method === "transit" ? "1" : method === "walk" ? "3" : "")
				);

				if (Native.OS.name === "Android") {
					location.href = intent;
					return;
				}

				new Native.App({
					ios: {
						scheme: scheme,
						trackId: "311867728",
					},
					windows: {
						fallback: fallback
					},
					mac: {
						fallback: fallback
					}
				})
					.run();
				return;
			case "kakao-map":
				intent = createIntent(
					scheme = "kakaomap://route"
						+ "?ep=" + encodeURIComponent(LATITUDE + "," + LONGITUDE)
						+ "&by=" + encodeURIComponent(method === "car" ? "0" : method === "transit" ? "PUBLICTRANSIT" : method === "walk" ? "FOOT" : ""),
					packageName = "net.daum.android.map",
					fallback = "https://map.kakao.com/link/to/"
						+ encodeURIComponent(PLACE_NAME + "," + LATITUDE + "," + LONGITUDE)
				);

				if (Native.OS.name === "Android") {
					location.href = intent;
					return;
				}

				new Native.App({
					ios: {
						scheme: scheme,
						trackId: "304608425",
					},
					windows: {
						fallback: fallback
					},
					mac: {
						fallback: fallback
					}
				})
					.run();
				return;
			case "kakao-navi":
				Kakao.Navi.start({
					name: PLACE_NAME,
					x: +LONGITUDE,
					y: +LATITUDE,
					coordType: "wgs84",
				});
				return;
			case "google-map":
				if (Native.OS.name === "Android") {
					if (method === "transit") {
						location.href = createIntent(
							"https://maps.google.com/maps"
								+ "?daddr=" + encodeURIComponent(PLACE_NAME)
								+ "&directionsmode=" + encodeURIComponent("transit"),
							"com.google.android.apps.maps"
						);
					} else {
						location.href = createIntent(
							"google.navigation://maps.google.com/maps"
								+ "?q=" + encodeURIComponent(PLACE_NAME)
								+ "&mode=" + encodeURIComponent(method === "car" ? "d" : method === "walk" ? "w" : ""),
							"com.google.android.apps.maps"
						);
					}

					return;
				}

				scheme = "comgooglemaps://"
					+ "?daddr=" + encodeURIComponent(PLACE_NAME)
					+ "&center=" + encodeURIComponent(LATITUDE + "," + LONGITUDE)
					+ "&directionsmode=" + encodeURIComponent(method === "car" ? "driving" : method === "transit" ? "transit" : method === "walk" ? "walking" : "");

				fallback = "https://www.google.co.kr/maps/dir//"
					+ encodeURIComponent(PLACE_ADDRESS + " " + PLACE_NAME);

				new Native.App({
					ios: {
						scheme: scheme,
						trackId: "585027354",
					},
					windows: {
						fallback: fallback
					},
					mac: {
						fallback: fallback
					}
				})
					.run();
				return;
			case "apple-map":
				scheme = "maps://"
					+ "?daddr=" + encodeURIComponent(LATITUDE + "," + LONGITUDE)
					+ "&dirflg=" + encodeURIComponent(method === "car" ? "d" : method === "transit" ? "r" : method === "walk" ? "w" : "");

				new Native.App({
					ios: {
						scheme: scheme,
					},
					mac: {
						scheme: scheme,
					}
				})
					.run();
				return;
			case "uber-taxi":
				intent = createIntent(
					scheme = "uber://"
						+ "?action=setPickup"
						+ "&pickup=my_location"
						+ "&dropoff[latitude]=" + encodeURIComponent(LATITUDE)
						+ "&dropoff[longitude]=" + encodeURIComponent(LONGITUDE)
						+ "&dropoff[nickname]=" + encodeURIComponent(PLACE_NAME),
					packageName = "com.ubercab"
				);

				fallback = "https://m.uber.com/go/home"
					+ "?drop%5B0%5D=" + encodeURIComponent(
						JSON.stringify({
								addressLine1: PLACE_NAME,
								latitude: +LATITUDE,
								longitude: +LONGITUDE,
								source: "SEARCH",
								provider: "tmap_places"
							})
					);

				if (Native.OS.name === "Android") {
					location.href = intent;
					return;
				}

				new Native.App({
					ios: {
						scheme: scheme,
						trackId: "431589174",
					},
					windows: {
						fallback: fallback
					},
					mac: {
						fallback: fallback
					}
				})
					.run();
		}
	}

	function createSchedule() {
		let kakaoAccessToken = localStorage.getItem("kakaoAccessToken");

		if (!kakaoAccessToken) {
			init();
		} else {
			create();
		}

		function fetchWithAuthRetry(input, options) {
			return fetch(input, options).then(async (response) => {
				if (response.status === 401) {
					localStorage.removeItem("kakaoAccessToken");
					kakaoAccessToken = null;
					init();
				}
				return response;
			});
		}

		function init() {
			const search = new URLSearchParams(location.search);
			const clientId = encodeURIComponent(KAKAO_REST_API_KEY);
			const redirectURI = encodeURIComponent(location.origin + location.pathname + "?mode=schedule");

			if (search.has("code")) {
				const grantType = encodeURIComponent("authorization_code");
				const code = search.get("code");

				window.history.replaceState(null, '', location.protocol + "//" + location.host + location.pathname + "?mode=schedule" + location.hash);

				fetch(
					"https://kauth.kakao.com/oauth/token"
					+ "?grant_type=" + grantType
					+ "&client_id=" + clientId
					+ "&redirect_uri=" + redirectURI
					+ "&code=" + code,
					{
						method: "POST"
					}
				)
					.then(response => response.json())
					.then(response => {
						localStorage.setItem("kakaoAccessToken", kakaoAccessToken = response.access_token);
						createSchedule();
					});
			} else {
				const responseType = encodeURIComponent("code");
				const scope = encodeURIComponent("talk_calendar");

				location.href = "https://kauth.kakao.com/oauth/authorize"
					+ "?client_id=" + clientId
					+ "&redirect_uri=" + redirectURI
					+ "&response_type=" + responseType
					+ "&scope=" + scope;
			}
		}

		function create() {
			fetch(
				"https://dapi.kakao.com/v2/local/search/keyword.JSON"
				+ "?query=" + encodeURIComponent(PLACE_NAME)
				+ "&x=" + encodeURIComponent(LONGITUDE)
				+ "&y=" + encodeURIComponent(LATITUDE),
				{
					headers: {
						"Authorization": "KakaoAK " + KAKAO_REST_API_KEY,
					}
				}
			)
				.then(response => response.json())
				.then(response => {
					const locationID = response.documents[0].id;

					const body = {
						title: GROOM + "❤️" + BRIDE + " 결혼식",
						time: {
							start_at: WEDDING_DATE_TIME_START_ISO_STRING,
							end_at: WEDDING_DATE_TIME_END_ISO_STRING,
							time_zone: TIMEZONE,
							all_day: false,
							lunar: false
						},
						description: META_DESCRIPTION,
						location: {
							name: PLACE_NAME,
							location_id: locationID,
							address: PLACE_ADDRESS,
							latitude: LATITUDE,
							longitude: LONGITUDE
						},
						reminders: [60, 120],
						color: "PINK"
					};

					fetchWithAuthRetry(
						"https://kapi.kakao.com/v2/api/calendar/events"
						+ "?from=" + encodeURIComponent(WEDDING_DATE_TIME_START_ISO_STRING)
						+ "&to=" + encodeURIComponent(WEDDING_DATE_TIME_END_ISO_STRING),
						{
							headers: {
								"Authorization": "Bearer " + kakaoAccessToken,
							}
						}
					)
						.then(response => response.json())
						.then(response => {
							const matched = response.events.find(e => e.title === body.title);

							if (!matched) {
								const bodyString = JSON.stringify(body);

								return fetchWithAuthRetry(
									"https://kapi.kakao.com/v2/api/calendar/create/event",
									{
										method: "POST",
										headers: {
											"Authorization": "Bearer " + kakaoAccessToken,
											"Content-Type": "application/x-www-form-urlencoded"
										},
										body: "event=" + encodeURIComponent(bodyString),
									}
								)
									.then(response => response.json())
									.then(() => onsuccess());
							} else {
								return onsuccess();
							}
						});
				});
		}

		function onsuccess() {
			const scheme = "kakaotalk://calendar/home"
				+ "?date=" + encodeURIComponent(WEDDING_DATE_ISO_STRING);

			const fallback = "https://calendar.kakao.com/"
				+ "?date=" + encodeURIComponent(WEDDING_DATE_ISO_STRING);

			new Native.App({
				android: {
					scheme: scheme,
				},
				ios: {
					scheme: scheme,
				},
				windows: {
					fallback: fallback
				},
				mac: {
					fallback: fallback
				}
			})
				.run();

			function onvisibilitychange() {
				if (document.visibilityState === "visible") {
					document.removeEventListener("visibilitychange", onvisibilitychange);
					closeKakaoTalkInAppBrowser();
				}
			}

			document.addEventListener("visibilitychange", onvisibilitychange);
			closeKakaoTalkInAppBrowser();
		}
	}

	function closeKakaoTalkInAppBrowser() {
		if (document.body.dataset.wv !== "kakao") return;
		if (Native.OS.name === "iOS") return location.href = "kakaoweb://closeBrowser";
		return location.href = "kakaotalk://inappbrowser/close";
	}

	function doShareKakaoTalk() {
		Kakao.Share.sendDefault({
			objectType: "feed",
			content: {
				title: "자세히 보기",
				description: "https://pjy0509.github.io/invitation",
				imageUrl: "https://raw.githubusercontent.com/pjy0509/pjy0509.github.io/refs/heads/main/invitation/assets/images/i0.jpg",
				link: {
					mobileWebUrl: "https://pjy0509.github.io/invitation",
					webUrl: "https://pjy0509.github.io/invitation",
				},
			},
			itemContent: {
				profileText: META_TITLE,
			},
			buttons: [
				{
					title: "찾아오는 길",
					link: {
						mobileWebUrl: "https://pjy0509.github.io/invitation?mode=route",
						webUrl: "https://pjy0509.github.io/invitation?mode=route",
					},
				},
				{
					title: "일정 등록",
					link: {
						mobileWebUrl: "https://pjy0509.github.io/invitation?mode=schedule",
						webUrl: "https://pjy0509.github.io/invitation?mode=schedule",
					},
				}
			],
		});
	}

	let alertId = 0;

	function showAlert(content) {
		const alert = document.createElement("div");

		alert.innerText = content;
		alert.dataset.alertId = (++alertId).toString();

		document.body.append(alert);

		return alertId;
	}
</script>
</body>
</html>
